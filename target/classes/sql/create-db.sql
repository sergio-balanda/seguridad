DROP TABLE Usuario IF EXISTS CASCADE;
DROP TABLE Rol IF EXISTS CASCADE;
DROP TABLE Auditoria IF EXISTS CASCADE ;

CREATE TABLE Rol(
	id INTEGER GENERATED BY DEFAULT AS IDENTITY(START WITH 1, INCREMENT BY 1) PRIMARY KEY,
	authority VARCHAR (30),
);

CREATE TABLE Usuario (
  id 			INTEGER GENERATED BY DEFAULT AS IDENTITY(START WITH 1, INCREMENT BY 1) PRIMARY KEY,
  email 		VARCHAR(50),
  password 		VARCHAR(50),
  estado  		VARCHAR(50),
  texto 		varchar(150),
  rol 			INTEGER,
  CONSTRAINT FK_IDROL_ROL  FOREIGN KEY (rol) REFERENCES Rol(id) ON DELETE SET NULL,
  UNIQUE (email),
);

CREATE TABLE Auditoria(
	id INTEGER GENERATED BY DEFAULT AS IDENTITY(START WITH 1, INCREMENT BY 1) PRIMARY KEY,	
	accion VARCHAR (100),
	usuario INTEGER,	
	creado VARCHAR(100),
	actualizado VARCHAR (100),
	CONSTRAINT FK_IDUSUARIO FOREIGN KEY (usuario) REFERENCES Usuario(id) ON DELETE SET NULL,
);










